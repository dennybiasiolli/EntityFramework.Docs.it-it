---
title: Uso delle entità disconnesse - EF6
author: divega
ms.date: 10/23/2016
ms.assetid: 12138003-a373-4817-b1b7-724130202f5f
ms.openlocfilehash: f1ce44e7b00ec4c60a81ed850ce5c9d866495e1b
ms.sourcegitcommit: 708b18520321c587b2046ad2ea9fa7c48aeebfe5
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/09/2019
ms.locfileid: "72181763"
---
# <a name="working-with-disconnected-entities"></a><span data-ttu-id="08e60-102">Uso delle entità disconnesse</span><span class="sxs-lookup"><span data-stu-id="08e60-102">Working with disconnected entities</span></span>
<span data-ttu-id="08e60-103">In un'applicazione basata su Entity Framework il rilevamento delle modifiche applicate alle entità rilevate viene eseguito da una classe contesto.</span><span class="sxs-lookup"><span data-stu-id="08e60-103">In an Entity Framework-based application, a context class is responsible for detecting changes applied to tracked entities.</span></span> <span data-ttu-id="08e60-104">Se si chiama il metodo SaveChanges le modifiche rilevate dal contesto vengono rese persistenti per il database.</span><span class="sxs-lookup"><span data-stu-id="08e60-104">Calling the SaveChanges method persists the changes tracked by the context to the database.</span></span> <span data-ttu-id="08e60-105">Quando si usano le applicazioni a più livelli, gli oggetti entità vengono modificati generalmente durante la disconnessione dal contesto ed è necessario decidere come tenere traccia delle modifiche e come segnalare le modifiche al contesto.</span><span class="sxs-lookup"><span data-stu-id="08e60-105">When working with n-tier applications, entity objects are usually modified while disconnected from the context, and you must decide how to track changes and report those changes back to the context.</span></span> <span data-ttu-id="08e60-106">Questo argomento descrive diverse opzioni disponibili quando si usa Entity Framework con entità disconnesse.</span><span class="sxs-lookup"><span data-stu-id="08e60-106">This topic discusses different options that are available when using Entity Framework with disconnected entities.</span></span>   

## <a name="web-service-frameworks"></a><span data-ttu-id="08e60-107">Framework di servizi Web</span><span class="sxs-lookup"><span data-stu-id="08e60-107">Web service frameworks</span></span>

<span data-ttu-id="08e60-108">Le tecnologie dei servizi Web supportano in genere criteri che possono essere usati per rendere persistenti le modifiche in oggetti singoli disconnessi.</span><span class="sxs-lookup"><span data-stu-id="08e60-108">Web services technologies typically support patterns that can be used to persist changes on individual disconnected objects.</span></span> <span data-ttu-id="08e60-109">Ad esempio, l'API Web ASP.NET consente di codificare le azioni del controller che possono includere chiamate a Entity Framework per rendere persistenti le modifiche apportate a un oggetto in un database.</span><span class="sxs-lookup"><span data-stu-id="08e60-109">For example, ASP.NET Web API allows you to code controller actions that can include calls to EF to persist changes made to an object on a database.</span></span> <span data-ttu-id="08e60-110">In effetti, gli strumenti per l'API Web in Visual Studio semplificano lo scaffolding di un controller dell'API Web dal modello di Entity Framework 6.</span><span class="sxs-lookup"><span data-stu-id="08e60-110">In fact, the Web API tooling in Visual Studio makes it easy to scaffold a Web API controller from your Entity Framework 6 model.</span></span> <span data-ttu-id="08e60-111">Per altre informazioni, vedere [Uso di API Web con Entity Framework 6](https://docs.microsoft.com/aspnet/web-api/overview/data/using-web-api-with-entity-framework/).</span><span class="sxs-lookup"><span data-stu-id="08e60-111">For more information, see [using Web API with Entity Framework 6](https://docs.microsoft.com/aspnet/web-api/overview/data/using-web-api-with-entity-framework/).</span></span>   

<span data-ttu-id="08e60-112">In passato, erano disponibili altre tecnologie di servizi Web che offrivano l'integrazione con Entity Framework, come ad esempio [WCF Data Services](https://docs.microsoft.com/dotnet/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf) e [Servizi RIA](https://docs.microsoft.com/previous-versions/dotnet/wcf-ria/ee707344(v=vs.91)).</span><span class="sxs-lookup"><span data-stu-id="08e60-112">Historically, there have been several other Web services technologies that offered integration with Entity Framework, like [WCF Data Services](https://docs.microsoft.com/dotnet/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf) and [RIA Services](https://docs.microsoft.com/previous-versions/dotnet/wcf-ria/ee707344(v=vs.91)).</span></span>

## <a name="low-level-ef-apis"></a><span data-ttu-id="08e60-113">API Entity Framework di basso livello</span><span class="sxs-lookup"><span data-stu-id="08e60-113">Low-level EF APIs</span></span>

<span data-ttu-id="08e60-114">Se non si vuole usare una soluzione a più livelli esistente, o se si vuole personalizzare il comportamento all'interno di un'azione del controller in servizi API Web, Entity Framework offre API che consentono di applicare le modifiche apportate a un livello disconnesso.</span><span class="sxs-lookup"><span data-stu-id="08e60-114">If you don't want to use an existing n-tier solution, or if you want to customize what happens inside a controller action in a Web API services, Entity Framework provides APIs that allow you to apply changes made on a disconnected tier.</span></span> <span data-ttu-id="08e60-115">Per altre informazioni, vedere [Add, Attach, and entity state](~/ef6/saving/change-tracking/entity-state.md) (Aggiungere e allegare stato entità).</span><span class="sxs-lookup"><span data-stu-id="08e60-115">For more information, see [Add, Attach, and entity state](~/ef6/saving/change-tracking/entity-state.md).</span></span>  

## <a name="self-tracking-entities"></a><span data-ttu-id="08e60-116">Entità con rilevamento automatico</span><span class="sxs-lookup"><span data-stu-id="08e60-116">Self-Tracking Entities</span></span>  

<span data-ttu-id="08e60-117">Rilevare le modifiche nei grafici arbitrari delle entità durante la disconnessione dal contesto di Entity Framework è un problema complesso.</span><span class="sxs-lookup"><span data-stu-id="08e60-117">Tracking changes on arbitrary graphs of entities while disconnected from the EF context is a hard problem.</span></span> <span data-ttu-id="08e60-118">Uno dei tentativi per risolverlo è stato il modello di generazione di codice di entità con rilevamento automatico.</span><span class="sxs-lookup"><span data-stu-id="08e60-118">One of the attempts to solve it was the Self-Tracking Entities code generation template.</span></span> <span data-ttu-id="08e60-119">Questo modello genera classi di entità che contengono la logica per tenere traccia delle modifiche apportate in un livello disconnesso come stato nelle entità stesse.</span><span class="sxs-lookup"><span data-stu-id="08e60-119">This template generates entity classes that contain logic to track changes made on a disconnected tier as state in the entities themselves.</span></span> <span data-ttu-id="08e60-120">Viene generato anche un set di metodi di estensione per applicare le modifiche a un contesto.</span><span class="sxs-lookup"><span data-stu-id="08e60-120">A set of extension methods is also generated to apply those changes to a context.</span></span>

<span data-ttu-id="08e60-121">Questo modello può essere usato con i modelli creati usando la finestra di progettazione di Entity Framework, ma non può essere usato con i modelli Code First.</span><span class="sxs-lookup"><span data-stu-id="08e60-121">This template can be used with models created using the EF Designer, but can not be used with Code First models.</span></span> <span data-ttu-id="08e60-122">Per altre informazioni, vedere [Self-Tracking Entities](self-tracking-entities/index.md) (Entità con rilevamento automatico).</span><span class="sxs-lookup"><span data-stu-id="08e60-122">For more information, see [Self-Tracking Entities](self-tracking-entities/index.md).</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="08e60-123">L'uso del modello di entità con rilevamento automatico non è più consigliabile.</span><span class="sxs-lookup"><span data-stu-id="08e60-123">We no longer recommend using the self-tracking-entities template.</span></span> <span data-ttu-id="08e60-124">Continuerà a essere disponibile solo per supportare le applicazioni esistenti.</span><span class="sxs-lookup"><span data-stu-id="08e60-124">It will only continue to be available to support existing applications.</span></span> <span data-ttu-id="08e60-125">Se l'applicazione richiede l'uso con grafici di entità disconnesse, prendere in considerazione altre alternative, come ad esempio [Trackable Entities](https://trackableentities.github.io/), che è una tecnologia simile alle entità con rilevamento automatico ma viene sviluppata in modo più attivo dalla community, oppure la scrittura di codice personalizzato usando le API di rilevamento delle modifiche di basso livello.</span><span class="sxs-lookup"><span data-stu-id="08e60-125">If your application requires working with disconnected graphs of entities, consider other alternatives such as [Trackable Entities](https://trackableentities.github.io/), which is a technology similar to Self-Tracking-Entities that is more actively developed by the community, or writing custom code using the low-level change tracking APIs.</span></span>
