---
title: Relazioni-EF designer-EF6
author: divega
ms.date: 10/23/2016
ms.assetid: 402fe960-754b-470f-976b-e5de3e9986b5
ms.openlocfilehash: d429c39dafbf183caabdc85748c188deb8dd6f66
ms.sourcegitcommit: cc0ff36e46e9ed3527638f7208000e8521faef2e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/06/2020
ms.locfileid: "78418245"
---
# <a name="relationships---ef-designer"></a><span data-ttu-id="ed0c6-102">Relazioni-EF designer</span><span class="sxs-lookup"><span data-stu-id="ed0c6-102">Relationships - EF Designer</span></span>
> [!NOTE]
> <span data-ttu-id="ed0c6-103">In questa pagina vengono fornite informazioni sulla configurazione delle relazioni nel modello mediante la finestra di progettazione EF.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-103">This page provides information about setting up relationships in your model using the EF Designer.</span></span> <span data-ttu-id="ed0c6-104">Per informazioni generali sulle relazioni in EF e su come accedere e modificare i dati usando le relazioni, vedere [relazioni & proprietà di navigazione](~/ef6/fundamentals/relationships.md).</span><span class="sxs-lookup"><span data-stu-id="ed0c6-104">For general information about relationships in EF and how to access and manipulate data using relationships, see [Relationships & Navigation Properties](~/ef6/fundamentals/relationships.md).</span></span>

<span data-ttu-id="ed0c6-105">Le associazioni definiscono le relazioni tra i tipi di entità in un modello.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-105">Associations define relationships between entity types in a model.</span></span> <span data-ttu-id="ed0c6-106">In questo argomento viene illustrato come eseguire il mapping delle associazioni con la Entity Framework Designer (progettazione EF).</span><span class="sxs-lookup"><span data-stu-id="ed0c6-106">This topic shows how to map associations with the Entity Framework Designer (EF Designer).</span></span> <span data-ttu-id="ed0c6-107">Nell'immagine seguente vengono illustrate le finestre principali che vengono usate quando si usa la finestra di progettazione EF.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-107">The following image shows the main windows that are used when working with the EF Designer.</span></span>

![EF Designer](~/ef6/media/efdesigner.png)

> [!NOTE]
> <span data-ttu-id="ed0c6-109">Quando si compila il modello concettuale, è possibile che in Elenco errori vengano visualizzati avvisi riguardanti entità e associazioni non mappate.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-109">When you build the conceptual model, warnings about unmapped entities and associations may appear in the Error List.</span></span> <span data-ttu-id="ed0c6-110">È possibile ignorare questi avvisi perché, dopo aver scelto di generare il database dal modello, gli errori verranno rilasciati.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-110">You can ignore these warnings because after you choose to generate the database from the model, the errors will go away.</span></span>

## <a name="associations-overview"></a><span data-ttu-id="ed0c6-111">Cenni preliminari sulle associazioni</span><span class="sxs-lookup"><span data-stu-id="ed0c6-111">Associations Overview</span></span>

<span data-ttu-id="ed0c6-112">Quando si progetta il modello utilizzando la finestra di progettazione EF, un file con estensione edmx rappresenta il modello.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-112">When you design your model using the EF Designer, an .edmx file represents your model.</span></span> <span data-ttu-id="ed0c6-113">Nel file con estensione edmx, un elemento **Association** definisce una relazione tra due tipi di entità.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-113">In the .edmx file, an **Association** element defines a relationship between two entity types.</span></span> <span data-ttu-id="ed0c6-114">Un'associazione deve specificare i tipi di entità coinvolti nella relazione e il possibile numero di tipi di entità a ogni entità finale della relazione, che è noto come molteplicità.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-114">An association must specify the entity types that are involved in the relationship and the possible number of entity types at each end of the relationship, which is known as the multiplicity.</span></span> <span data-ttu-id="ed0c6-115">La molteplicità di un'entità finale di un'associazione può avere un valore pari a uno (1), zero o uno (0.. 1) o molti (\*).</span><span class="sxs-lookup"><span data-stu-id="ed0c6-115">The multiplicity of an association end can have a value of one (1), zero or one (0..1), or many (\*).</span></span> <span data-ttu-id="ed0c6-116">Queste informazioni vengono specificate in due elementi **end** figlio.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-116">This information is specified in two child **End** elements.</span></span>

<span data-ttu-id="ed0c6-117">In fase di esecuzione, è possibile accedere alle istanze del tipo di entità in un'entità finale di un'associazione tramite proprietà di navigazione o chiavi esterne (se si sceglie di esporre chiavi esterne nelle entità).</span><span class="sxs-lookup"><span data-stu-id="ed0c6-117">At run time, entity type instances at one end of an association can be accessed through navigation properties or foreign keys (if you choose to expose foreign keys in your entities).</span></span> <span data-ttu-id="ed0c6-118">Con le chiavi esterne esposte, la relazione tra le entità viene gestita con un elemento **ReferentialConstraint** (un elemento figlio dell'elemento **Association** ).</span><span class="sxs-lookup"><span data-stu-id="ed0c6-118">With foreign keys exposed, the relationship between the entities is managed with a **ReferentialConstraint** element (a child element of the **Association** element).</span></span> <span data-ttu-id="ed0c6-119">È consigliabile esporre sempre chiavi esterne per le relazioni nelle entità.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-119">It is recommended that you always expose foreign keys for relationships in your entities.</span></span>

> [!NOTE]
> <span data-ttu-id="ed0c6-120">In molti-a-molti (\*:\*) non è possibile aggiungere chiavi esterne alle entità.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-120">In many-to-many (\*:\*) you cannot add foreign keys to the entities.</span></span> <span data-ttu-id="ed0c6-121">In una relazione \*:\*, le informazioni di associazione vengono gestite con un oggetto indipendente.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-121">In a \*:\* relationship, the association information is managed with an independent object.</span></span>

<span data-ttu-id="ed0c6-122">Per informazioni sugli elementi CSDL (**ReferentialConstraint**, **Association**e così via), vedere la [specifica CSDL](~/ef6/modeling/designer/advanced/edmx/csdl-spec.md).</span><span class="sxs-lookup"><span data-stu-id="ed0c6-122">For information about CSDL elements (**ReferentialConstraint**, **Association**, etc.) see the [CSDL specification](~/ef6/modeling/designer/advanced/edmx/csdl-spec.md).</span></span>

## <a name="create-and-delete-associations"></a><span data-ttu-id="ed0c6-123">Creazione ed eliminazione di associazioni</span><span class="sxs-lookup"><span data-stu-id="ed0c6-123">Create and Delete Associations</span></span>

<span data-ttu-id="ed0c6-124">La creazione di un'associazione con la finestra di progettazione EF aggiorna il contenuto del modello del file con estensione edmx.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-124">Creating an association with the EF Designer updates the model content of the .edmx file.</span></span> <span data-ttu-id="ed0c6-125">Dopo aver creato un'associazione, è necessario creare i mapping per l'associazione, descritti più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-125">After creating an association, you must create the mappings for the association (discussed later in this topic).</span></span>

> [!NOTE]
> <span data-ttu-id="ed0c6-126">In questa sezione si presuppone che siano già state aggiunte le entità per le quali si desidera creare un'associazione al modello.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-126">This section assumes that you already added the entities you wish to create an association between to your model.</span></span>

### <a name="to-create-an-association"></a><span data-ttu-id="ed0c6-127">Per creare un'associazione</span><span class="sxs-lookup"><span data-stu-id="ed0c6-127">To create an association</span></span>

1.  <span data-ttu-id="ed0c6-128">Fare clic con il pulsante destro del mouse su un'area vuota dell'area di progettazione, scegliere **Aggiungi nuovo**e selezionare **associazione.**</span><span class="sxs-lookup"><span data-stu-id="ed0c6-128">Right-click an empty area of the design surface, point to **Add New**, and select **Association…**.</span></span>
2.  <span data-ttu-id="ed0c6-129">Specificare le impostazioni per l'associazione nella finestra di dialogo **Aggiungi associazione** .</span><span class="sxs-lookup"><span data-stu-id="ed0c6-129">Fill in the settings for the association in the **Add Association** dialog.</span></span>

    ![Aggiungi associazione](~/ef6/media/addassociation.png)

    > [!NOTE]
    > <span data-ttu-id="ed0c6-131">È possibile scegliere di non aggiungere proprietà di navigazione o proprietà di chiave esterna alle entità finali dell'associazione deselezionando la **proprietà di navigazione **e **aggiungendo proprietà di chiave esterna al nome del tipo di entità &lt;&gt; **le caselle di controllo delle entità.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-131">You can choose to not add navigation properties or foreign key properties to the entities at the ends of the association by clearing the **Navigation Property **and **Add foreign key properties to the &lt;entity type name&gt; Entity **checkboxes.</span></span> <span data-ttu-id="ed0c6-132">Se si aggiunge una sola proprietà di navigazione, l'associazione sarà attraversabile in una sola direzione.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-132">If you add only one navigation property, the association will be traversable in only one direction.</span></span> <span data-ttu-id="ed0c6-133">Se non si aggiungono proprietà di navigazione, è necessario scegliere di aggiungere proprietà di chiave esterna per accedere alle entità finali dell'associazione.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-133">If you add no navigation properties, you must choose to add foreign key properties in order to access entities at the ends of the association.</span></span>
    
3.  <span data-ttu-id="ed0c6-134">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-134">Click **OK**.</span></span>

### <a name="to-delete-an-association"></a><span data-ttu-id="ed0c6-135">Per eliminare un'associazione</span><span class="sxs-lookup"><span data-stu-id="ed0c6-135">To delete an association</span></span>

<span data-ttu-id="ed0c6-136">Per eliminare un'associazione, effettuare una delle operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="ed0c6-136">To delete an association do one of the following:</span></span>

-   <span data-ttu-id="ed0c6-137">Fare clic con il pulsante destro del mouse sull'associazione nell'area di progettazione EF e scegliere **Elimina**.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-137">Right-click the association on the EF Designer surface and select **Delete**.</span></span>

- <span data-ttu-id="ed0c6-138">oppure -</span><span class="sxs-lookup"><span data-stu-id="ed0c6-138">OR -</span></span>

-   <span data-ttu-id="ed0c6-139">Selezionare una o più associazioni e premere il tasto CANC.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-139">Select one or more associations and press the DELETE key.</span></span>

## <a name="include-foreign-key-properties-in-your-entities-referential-constraints"></a><span data-ttu-id="ed0c6-140">Includere proprietà di chiave esterna nelle entità (vincoli referenziali)</span><span class="sxs-lookup"><span data-stu-id="ed0c6-140">Include Foreign Key Properties in Your Entities (Referential Constraints)</span></span>

<span data-ttu-id="ed0c6-141">È consigliabile esporre sempre chiavi esterne per le relazioni nelle entità.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-141">It is recommended that you always expose foreign keys for relationships in your entities.</span></span> <span data-ttu-id="ed0c6-142">Entity Framework utilizza un vincolo referenziale per verificare che una proprietà funga da chiave esterna per una relazione.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-142">Entity Framework uses a referential constraint to identify that a property acts as the foreign key for a relationship.</span></span>

<span data-ttu-id="ed0c6-143">Se durante la creazione di una relazione è stata selezionata la casella di controllo ***Aggiungi proprietà chiave esterna al nome del tipo di entità &lt;&gt; entità*** , il vincolo referenziale è stato aggiunto.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-143">If you checked the ***Add foreign key properties to the &lt;entity type name&gt; Entity*** checkbox when creating a relationship, this referential constraint was added for you.</span></span>

<span data-ttu-id="ed0c6-144">Quando si usa Entity Framework Designer per aggiungere o modificare un vincolo referenziale, Entity Framework Designer aggiunge o modifica un elemento **ReferentialConstraint** nel contenuto CSDL del file con estensione edmx.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-144">When you use the EF Designer to add or edit a referential constraint, the EF Designer adds or modifies a **ReferentialConstraint** element in the CSDL content of the .edmx file.</span></span>

-   <span data-ttu-id="ed0c6-145">Fare doppio clic sull'associazione che si desidera modificare.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-145">Double-click the association that you want to edit.</span></span>
    <span data-ttu-id="ed0c6-146">Verrà visualizzata la finestra di dialogo  **vincolo referenziale** .</span><span class="sxs-lookup"><span data-stu-id="ed0c6-146">The **Referential Constraint** dialog box appears.</span></span>
-   <span data-ttu-id="ed0c6-147">Dall'elenco a discesa **principale** selezionare l'entità principale nel vincolo referenziale.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-147">From the **Principal** drop-down list, select the principal entity in the referential constraint.</span></span>
    <span data-ttu-id="ed0c6-148">Le proprietà chiave dell'entità vengono aggiunte alla **chiave principale** elenco nella finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-148">The entity's key properties are added to the **Principal Key** list in the dialog box.</span></span>
-   <span data-ttu-id="ed0c6-149">Dall'elenco a discesa  **dipendente** selezionare l'entità dipendente nel vincolo referenziale.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-149">From the **Dependent** drop-down list, select the dependent entity in the referential constraint.</span></span>
-   <span data-ttu-id="ed0c6-150">Per ogni chiave principale con una chiave dipendente, selezionare una chiave dipendente corrispondente dagli elenchi a discesa nella colonna **chiave dipendente** .</span><span class="sxs-lookup"><span data-stu-id="ed0c6-150">For each principal key that has a dependent key, select a corresponding dependent key from the drop-down lists in the **Dependent Key** column.</span></span>

    ![Vincolo Ref](~/ef6/media/refconstraint.png)

-   <span data-ttu-id="ed0c6-152">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-152">Click **OK**.</span></span>

## <a name="create-and-edit-association-mappings"></a><span data-ttu-id="ed0c6-153">Creare e modificare i mapping di associazione</span><span class="sxs-lookup"><span data-stu-id="ed0c6-153">Create and Edit Association Mappings</span></span>

<span data-ttu-id="ed0c6-154">È possibile specificare il modo in cui un'associazione esegue il mapping al database nella finestra **Dettagli Mapping** della finestra di progettazione EF.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-154">You can specify how an association maps to the database in the **Mapping Details** window of the EF Designer.</span></span>

> [!NOTE]
> <span data-ttu-id="ed0c6-155">È possibile eseguire il mapping solo dei dettagli per le associazioni per le quali non è specificato un vincolo referenziale.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-155">You can only map details for the associations that do not have a referential constraint specified.</span></span> <span data-ttu-id="ed0c6-156">Se viene specificato un vincolo referenziale, viene inclusa una proprietà di chiave esterna nell'entità ed è possibile utilizzare i dettagli di mapping per l'entità per controllare la colonna a cui viene eseguito il mapping della chiave esterna.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-156">If a referential constraint is specified then a foreign key property is included in the entity and you can use the Mapping Details for the entity to control which column the foreign key maps to.</span></span>

### <a name="create-an-association-mapping"></a><span data-ttu-id="ed0c6-157">Creazione di un mapping di associazione</span><span class="sxs-lookup"><span data-stu-id="ed0c6-157">Create an association mapping</span></span>

-   <span data-ttu-id="ed0c6-158">Fare clic con il pulsante destro del mouse su un'associazione nell'area di progettazione e scegliere **mapping tabella**.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-158">Right-click an association in the design surface and select **Table Mapping**.</span></span>
    <span data-ttu-id="ed0c6-159">Viene visualizzato il mapping di associazione nella finestra **Dettagli mapping** .</span><span class="sxs-lookup"><span data-stu-id="ed0c6-159">This displays the association mapping in the **Mapping Details** window.</span></span>
-   <span data-ttu-id="ed0c6-160">Fare clic su **Aggiungi tabella o vista**.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-160">Click **Add a Table or View**.</span></span>
    <span data-ttu-id="ed0c6-161">Verrà visualizzato un elenco a discesa che include tutte le tabelle presenti nel modello di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-161">A drop-down list appears that includes all the tables in the storage model.</span></span>
-   <span data-ttu-id="ed0c6-162">Selezionare la tabella alla quale l'associazione verrà mappata.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-162">Select the table to which the association will map.</span></span>
    <span data-ttu-id="ed0c6-163">La finestra **Dettagli Mapping** Visualizza entrambe le estremità dell'associazione e le proprietà chiave per il tipo di entità a ogni **estremità**.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-163">The **Mapping Details** window displays both ends of the association and the key properties for the entity type at each **End**.</span></span>
-   <span data-ttu-id="ed0c6-164">Per ogni proprietà chiave, fare clic sul campo  **colonna** e selezionare la colonna a cui viene mappata la proprietà.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-164">For each key property, click the **Column** field, and select the column to which the property will map.</span></span>

    ![Dettagli mapping 4](~/ef6/media/mappingdetails4.png)

### <a name="edit-an-association-mapping"></a><span data-ttu-id="ed0c6-166">Modificare un mapping di associazione</span><span class="sxs-lookup"><span data-stu-id="ed0c6-166">Edit an association mapping</span></span>

-   <span data-ttu-id="ed0c6-167">Fare clic con il pulsante destro del mouse su un'associazione nell'area di progettazione e scegliere **mapping tabella**.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-167">Right-click an association in the design surface and select **Table Mapping**.</span></span>
    <span data-ttu-id="ed0c6-168">Viene visualizzato il mapping di associazione nella finestra **Dettagli mapping** .</span><span class="sxs-lookup"><span data-stu-id="ed0c6-168">This displays the association mapping in the **Mapping Details** window.</span></span>
-   <span data-ttu-id="ed0c6-169">Fare clic su **mapping per &lt;nome tabella&gt;** .</span><span class="sxs-lookup"><span data-stu-id="ed0c6-169">Click **Maps to &lt;Table Name&gt;**.</span></span>
    <span data-ttu-id="ed0c6-170">Verrà visualizzato un elenco a discesa che include tutte le tabelle presenti nel modello di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-170">A drop-down list appears that includes all the tables in the storage model.</span></span>
-   <span data-ttu-id="ed0c6-171">Selezionare la tabella alla quale l'associazione verrà mappata.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-171">Select the table to which the association will map.</span></span>
    <span data-ttu-id="ed0c6-172">La finestra **Dettagli Mapping** Visualizza entrambe le estremità dell'associazione e le proprietà chiave per il tipo di entità a ogni estremità.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-172">The **Mapping Details** window displays both ends of the association and the key properties for the entity type at each End.</span></span>
-   <span data-ttu-id="ed0c6-173">Per ogni proprietà chiave, fare clic sul campo  **colonna** e selezionare la colonna a cui viene mappata la proprietà.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-173">For each key property, click the **Column** field, and select the column to which the property will map.</span></span>

## <a name="edit-and-delete-navigation-properties"></a><span data-ttu-id="ed0c6-174">Modificare ed eliminare le proprietà di navigazione</span><span class="sxs-lookup"><span data-stu-id="ed0c6-174">Edit and Delete Navigation Properties</span></span>

<span data-ttu-id="ed0c6-175">Le proprietà di navigazione sono proprietà di collegamento utilizzate per individuare le entità finali di un'associazione in un modello.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-175">Navigation properties are shortcut properties that are used to locate the entities at the ends of an association in a model.</span></span> <span data-ttu-id="ed0c6-176">È possibile creare le proprietà di navigazione quando si crea un'associazione tra due tipi di entità.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-176">Navigation properties can be created when you create an association between two entity types.</span></span>

#### <a name="to-edit-navigation-properties"></a><span data-ttu-id="ed0c6-177">Per modificare le proprietà di navigazione</span><span class="sxs-lookup"><span data-stu-id="ed0c6-177">To edit navigation properties</span></span>

-   <span data-ttu-id="ed0c6-178">Selezionare una proprietà di navigazione nell'area di progettazione EF.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-178">Select a navigation property on the EF Designer surface.</span></span>
    <span data-ttu-id="ed0c6-179">Le informazioni sulla proprietà di navigazione vengono visualizzate nella finestra di  **Proprietà** di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-179">Information about the navigation property is displayed in the Visual Studio **Properties** window.</span></span>
-   <span data-ttu-id="ed0c6-180">Modificare le impostazioni delle proprietà nella finestra **proprietà** .</span><span class="sxs-lookup"><span data-stu-id="ed0c6-180">Change the property settings in the **Properties** window.</span></span>

#### <a name="to-delete-navigation-properties"></a><span data-ttu-id="ed0c6-181">Per eliminare le proprietà di navigazione</span><span class="sxs-lookup"><span data-stu-id="ed0c6-181">To delete navigation properties</span></span>

-   <span data-ttu-id="ed0c6-182">Se le chiavi esterne non sono esposte nei tipi di entità nel modello concettuale, è possibile che l'eliminazione di una proprietà di navigazione renda l'associazione corrispondente attraversabile in un'unica direzione o non attraversabile.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-182">If foreign keys are not exposed on entity types in the conceptual model, deleting a navigation property may make the corresponding association traversable in only one direction or not traversable at all.</span></span>
-   <span data-ttu-id="ed0c6-183">Fare clic con il pulsante destro del mouse su una proprietà di navigazione nell'area di progettazione EF e scegliere **Elimina**.</span><span class="sxs-lookup"><span data-stu-id="ed0c6-183">Right-click a navigation property on the EF Designer surface and select **Delete**.</span></span>
