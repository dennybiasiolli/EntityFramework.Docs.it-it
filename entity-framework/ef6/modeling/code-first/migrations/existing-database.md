---
title: Migrazioni Code First con un database esistente - Entity Framework 6
author: divega
ms.date: 10/23/2016
ms.assetid: f0cc4f93-67dd-4664-9753-0a9f913814db
ms.openlocfilehash: 77370ec7d922b8324b924a0b4aca3e58f5ec6066
ms.sourcegitcommit: 2b787009fd5be5627f1189ee396e708cd130e07b
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/13/2018
ms.locfileid: "45490571"
---
# <a name="code-first-migrations-with-an-existing-database"></a><span data-ttu-id="516f6-102">Migrazioni Code First con un database esistente</span><span class="sxs-lookup"><span data-stu-id="516f6-102">Code First Migrations with an existing database</span></span>
> [!NOTE]
> <span data-ttu-id="516f6-103">**EF4.3 e versioni successive solo** -le funzionalità, le API, e così via illustrati in questa pagina sono stati introdotti in Entity Framework 4.1.</span><span class="sxs-lookup"><span data-stu-id="516f6-103">**EF4.3 Onwards Only** - The features, APIs, etc. discussed in this page were introduced in Entity Framework 4.1.</span></span> <span data-ttu-id="516f6-104">Se si usa una versione precedente, le informazioni qui riportate, o parte di esse, non sono applicabili.</span><span class="sxs-lookup"><span data-stu-id="516f6-104">If you are using an earlier version, some or all of the information does not apply.</span></span>

<span data-ttu-id="516f6-105">Questo articolo illustra l'uso di migrazioni Code First con un database esistente, che non è stato creato da Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="516f6-105">This article covers using Code First Migrations with an existing database, one that wasn’t created by Entity Framework.</span></span>

> [!NOTE]
> <span data-ttu-id="516f6-106">Questo articolo presuppone che l'utente sappia usare migrazioni Code First in scenari di base.</span><span class="sxs-lookup"><span data-stu-id="516f6-106">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="516f6-107">Se in caso contrario, allora sarà necessario leggere [migrazioni Code First](~/ef6/modeling/code-first/migrations/index.md) prima di continuare.</span><span class="sxs-lookup"><span data-stu-id="516f6-107">If you don’t, then you’ll need to read [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) before continuing.</span></span>

## <a name="screencasts"></a><span data-ttu-id="516f6-108">Screencast</span><span class="sxs-lookup"><span data-stu-id="516f6-108">Screencasts</span></span>

<span data-ttu-id="516f6-109">Se si sarebbe piuttosto guardare uno screencast rispetto a leggere questo articolo, i due video seguenti riguardano lo stesso contenuto in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="516f6-109">If you'd rather watch a screencast than read this article, the following two videos cover the same content as this article.</span></span>

### <a name="video-one-migrations---under-the-hood"></a><span data-ttu-id="516f6-110">Un video: "Migrazioni - dietro le quinte"</span><span class="sxs-lookup"><span data-stu-id="516f6-110">Video One: "Migrations - Under the Hood"</span></span>

<span data-ttu-id="516f6-111">[In questo screencast](http://channel9.msdn.com/blogs/ef/migrations-under-the-hood) riguarda la modalità di traccia delle migrazioni e utilizza le informazioni sul modello per rilevare le modifiche al modello.</span><span class="sxs-lookup"><span data-stu-id="516f6-111">[This screencast](http://channel9.msdn.com/blogs/ef/migrations-under-the-hood) covers how migrations tracks and uses information about the model to detect model changes.</span></span>

### <a name="video-two-migrations---existing-databases"></a><span data-ttu-id="516f6-112">Due video: "Migrazioni - database esistente"</span><span class="sxs-lookup"><span data-stu-id="516f6-112">Video Two: "Migrations - Existing Databases"</span></span>

<span data-ttu-id="516f6-113">I concetti del video precedente, di compilazione [questo screencast](http://channel9.msdn.com/blogs/ef/migrations-existing-databases) illustra come abilitare e usare le migrazioni con un database esistente.</span><span class="sxs-lookup"><span data-stu-id="516f6-113">Building on the concepts from the previous video, [this screencast](http://channel9.msdn.com/blogs/ef/migrations-existing-databases) covers how to enable and use migrations with an existing database.</span></span>

## <a name="step-1-create-a-model"></a><span data-ttu-id="516f6-114">Passaggio 1: Creare un modello</span><span class="sxs-lookup"><span data-stu-id="516f6-114">Step 1: Create a model</span></span>

<span data-ttu-id="516f6-115">Il primo passaggio sarà quello di creare un modello Code First destinato a un database esistente.</span><span class="sxs-lookup"><span data-stu-id="516f6-115">Your first step will be to create a Code First model that targets your existing database.</span></span> <span data-ttu-id="516f6-116">Il [Code First per un Database esistente](~/ef6/modeling/code-first/workflows/existing-database.md) argomento fornisce indicazioni dettagliate su come eseguire questa operazione.</span><span class="sxs-lookup"><span data-stu-id="516f6-116">The [Code First to an Existing Database](~/ef6/modeling/code-first/workflows/existing-database.md) topic provides detailed guidance on how to do this.</span></span>

>[!NOTE]
> <span data-ttu-id="516f6-117">È importante seguire il resto dei passaggi in questo argomento prima di apportare modifiche al modello che richiede modifiche allo schema del database.</span><span class="sxs-lookup"><span data-stu-id="516f6-117">It is important to follow the rest of the steps in this topic before making any changes to your model that would require changes to the database schema.</span></span> <span data-ttu-id="516f6-118">I passaggi seguenti richiedono il modello sia sincronizzato con lo schema del database.</span><span class="sxs-lookup"><span data-stu-id="516f6-118">The following steps require the model to be in-sync with the database schema.</span></span>

## <a name="step-2-enable-migrations"></a><span data-ttu-id="516f6-119">Passaggio 2: Abilitare le migrazioni</span><span class="sxs-lookup"><span data-stu-id="516f6-119">Step 2: Enable Migrations</span></span>

<span data-ttu-id="516f6-120">Il passaggio successivo è abilitare le migrazioni.</span><span class="sxs-lookup"><span data-stu-id="516f6-120">The next step is to enable migrations.</span></span> <span data-ttu-id="516f6-121">È possibile farlo eseguendo il **Enable-Migrations** comando nella Console di gestione pacchetti.</span><span class="sxs-lookup"><span data-stu-id="516f6-121">You can do this by running the **Enable-Migrations** command in Package Manager Console.</span></span>

<span data-ttu-id="516f6-122">Questo comando creare una cartella nella soluzione denominata migrazioni e inserire una singola classe in essa definita configurazione.</span><span class="sxs-lookup"><span data-stu-id="516f6-122">This command will create a folder in your solution called Migrations, and put a single class inside it called Configuration.</span></span> <span data-ttu-id="516f6-123">La classe di configurazione è possibile configurare le migrazioni per l'applicazione, è possibile trovare altre informazioni, vedere la [migrazioni Code First](~/ef6/modeling/code-first/migrations/index.md) argomento.</span><span class="sxs-lookup"><span data-stu-id="516f6-123">The Configuration class is where you configure migrations for your application, you can find out more about it in the [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) topic.</span></span>

## <a name="step-3-add-an-initial-migration"></a><span data-ttu-id="516f6-124">Passaggio 3: Aggiungere una migrazione iniziale</span><span class="sxs-lookup"><span data-stu-id="516f6-124">Step 3: Add an initial migration</span></span>

<span data-ttu-id="516f6-125">Dopo che le migrazioni sono state create e applicate a database locale che è anche possibile applicarli diventa altri database.</span><span class="sxs-lookup"><span data-stu-id="516f6-125">Once migrations have been created and applied to the local database you may also want to apply these changes to other databases.</span></span> <span data-ttu-id="516f6-126">Ad esempio, il database locale può essere un database di test e si potrebbe in definitiva desidera inoltre applicare le modifiche a un database di produzione e/o altri sviluppatori di database di test.</span><span class="sxs-lookup"><span data-stu-id="516f6-126">For example, your local database may be a test database and you may ultimately want to also apply the changes to a production database and/or other developers test databases.</span></span> <span data-ttu-id="516f6-127">Sono disponibili due opzioni per questo passaggio e quello che è consigliabile scegliere dipende se lo schema di altri database è vuoto o attualmente corrispondenti allo schema del database locale.</span><span class="sxs-lookup"><span data-stu-id="516f6-127">There are two options for this step and the one you should pick depends whether or not the schema of any other databases is empty or currently matches the schema of the local database.</span></span>

-   <span data-ttu-id="516f6-128">**Opzione uno: Utilizzare schema esistente come punto di partenza.**</span><span class="sxs-lookup"><span data-stu-id="516f6-128">**Option One: Use existing schema as starting point.**</span></span> <span data-ttu-id="516f6-129">È necessario utilizzare questo approccio quando altri database che in futuro verranno applicate le migrazioni a avrà lo stesso schema come ha attualmente il database locale.</span><span class="sxs-lookup"><span data-stu-id="516f6-129">You should use this approach when other databases that migrations will be applied to in the future will have the same schema as your local database currently has.</span></span> <span data-ttu-id="516f6-130">Ad esempio, è possibile utilizzare questo se i database di test locale corrisponde attualmente al v1 del database di produzione e si applicherà in seguito queste migrazioni per aggiornare il database di produzione a v2.</span><span class="sxs-lookup"><span data-stu-id="516f6-130">For example, you might use this if your local test database currently matches v1 of your production database and you will later apply these migrations to update your production database to v2.</span></span>
-   <span data-ttu-id="516f6-131">**Opzione 2: Usare database vuoto come punto di partenza.**</span><span class="sxs-lookup"><span data-stu-id="516f6-131">**Option Two: Use empty database as starting point.**</span></span> <span data-ttu-id="516f6-132">È consigliabile usare questo approccio quando altri database che in futuro verranno applicate le migrazioni a sono vuoti (o non esistono ancora).</span><span class="sxs-lookup"><span data-stu-id="516f6-132">You should use this approach when other databases that migrations will be applied to in the future are empty (or do not exist yet).</span></span> <span data-ttu-id="516f6-133">Ad esempio, è possibile utilizzare questo se subito a sviluppare l'applicazione usando un database di test ma senza usare le migrazioni e si sarà in un secondo momento creare un database di produzione da zero.</span><span class="sxs-lookup"><span data-stu-id="516f6-133">For example, you might use this if you started developing your application using a test database but without using migrations and you will later want to create a production database from scratch.</span></span>

### <a name="option-one-use-existing-schema-as-a-starting-point"></a><span data-ttu-id="516f6-134">Opzione uno: Usare lo schema esistente come punto di partenza</span><span class="sxs-lookup"><span data-stu-id="516f6-134">Option One: Use existing schema as a starting point</span></span>

<span data-ttu-id="516f6-135">Migrazioni Code First utilizza uno snapshot del modello archiviato nel processo di migrazione più recente per rilevare le modifiche apportate al modello (è possibile trovare informazioni dettagliate in proposito [migrazioni Code First in ambienti di Team](~/ef6/modeling/code-first/migrations/teams.md)).</span><span class="sxs-lookup"><span data-stu-id="516f6-135">Code First Migrations uses a snapshot of the model stored in the most recent migration to detect changes to the model (you can find detailed information about this in [Code First Migrations in Team Environments](~/ef6/modeling/code-first/migrations/teams.md)).</span></span> <span data-ttu-id="516f6-136">Dal momento che si prevede di presumere che i database già lo schema del modello corrente, verranno generati una migrazione (no-op) vuota che contiene il modello corrente come snapshot.</span><span class="sxs-lookup"><span data-stu-id="516f6-136">Since we are going to assume that databases already have the schema of the current model, we will generate an empty (no-op) migration that has the current model as a snapshot.</span></span>

1.  <span data-ttu-id="516f6-137">Eseguire la **InitialCreate Add-Migration – IgnoreChanges** comando nella Console di gestione pacchetti.</span><span class="sxs-lookup"><span data-stu-id="516f6-137">Run the **Add-Migration InitialCreate –IgnoreChanges** command in Package Manager Console.</span></span> <span data-ttu-id="516f6-138">Verrà creata una migrazione vuota con il modello corrente come snapshot.</span><span class="sxs-lookup"><span data-stu-id="516f6-138">This creates an empty migration with the current model as a snapshot.</span></span>
2.  <span data-ttu-id="516f6-139">Eseguire la **Update-Database** comando nella Console di gestione pacchetti.</span><span class="sxs-lookup"><span data-stu-id="516f6-139">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="516f6-140">In questo applicherà la migrazione InitialCreate al database.</span><span class="sxs-lookup"><span data-stu-id="516f6-140">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="516f6-141">Poiché la migrazione effettiva non contiene tutte le modifiche, semplicemente aggiungere una riga per il \_ \_MigrationsHistory tabella che indica che questa migrazione è già stata applicata.</span><span class="sxs-lookup"><span data-stu-id="516f6-141">Since the actual migration doesn’t contain any changes, it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>

### <a name="option-two-use-empty-database-as-a-starting-point"></a><span data-ttu-id="516f6-142">Opzione 2: Usare database vuoto come punto di partenza</span><span class="sxs-lookup"><span data-stu-id="516f6-142">Option Two: Use empty database as a starting point</span></span>

<span data-ttu-id="516f6-143">In questo scenario è necessario migrazioni sia in grado di creare l'intero database da zero:, comprese le tabelle che sono già presenti nel database locale.</span><span class="sxs-lookup"><span data-stu-id="516f6-143">In this scenario we need Migrations to be able to create the entire database from scratch – including the tables that are already present in our local database.</span></span> <span data-ttu-id="516f6-144">Verranno per generare una migrazione InitialCreate che include la logica per creare lo schema esistente.</span><span class="sxs-lookup"><span data-stu-id="516f6-144">We’re going to generate an InitialCreate migration that includes logic to create the existing schema.</span></span> <span data-ttu-id="516f6-145">Si renderà quindi il database esistente sembra questa migrazione è già stata applicata.</span><span class="sxs-lookup"><span data-stu-id="516f6-145">We’ll then make our existing database look like this migration has already been applied.</span></span>

1.  <span data-ttu-id="516f6-146">Eseguire la **Add-Migration InitialCreate** comando nella Console di gestione pacchetti.</span><span class="sxs-lookup"><span data-stu-id="516f6-146">Run the **Add-Migration InitialCreate** command in Package Manager Console.</span></span> <span data-ttu-id="516f6-147">In questo modo viene creata una migrazione per creare lo schema esistente.</span><span class="sxs-lookup"><span data-stu-id="516f6-147">This creates a migration to create the existing schema.</span></span>
2.  <span data-ttu-id="516f6-148">Impostare come commento tutto il codice nel metodo verticale della migrazione appena creato.</span><span class="sxs-lookup"><span data-stu-id="516f6-148">Comment out all code in the Up method of the newly created migration.</span></span> <span data-ttu-id="516f6-149">Ciò permetterà di 'apply' la migrazione al database locale senza provare a ricreare tutte le tabelle e così via che esistano già.</span><span class="sxs-lookup"><span data-stu-id="516f6-149">This will allow us to ‘apply’ the migration to the local database without trying to recreate all the tables etc. that already exist.</span></span>
3.  <span data-ttu-id="516f6-150">Eseguire la **Update-Database** comando nella Console di gestione pacchetti.</span><span class="sxs-lookup"><span data-stu-id="516f6-150">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="516f6-151">In questo applicherà la migrazione InitialCreate al database.</span><span class="sxs-lookup"><span data-stu-id="516f6-151">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="516f6-152">Dato che non contiene l'effettiva migrazione delle eventuali modiche (perché è commentato temporaneamente tali moduli), è sufficiente aggiungere una riga per il \_ \_MigrationsHistory tabella che indica che questa migrazione è già stata applicata.</span><span class="sxs-lookup"><span data-stu-id="516f6-152">Since the actual migration doesn’t contain any changes (because we temporarily commented them out), it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>
4.  <span data-ttu-id="516f6-153">Rimuovere il commento il codice nel metodo di backup.</span><span class="sxs-lookup"><span data-stu-id="516f6-153">Un-comment the code in the Up method.</span></span> <span data-ttu-id="516f6-154">Ciò significa che quando viene applicata questa migrazione nei database futuri, lo schema già presenti nel database locale verrà creato mediante le migrazioni.</span><span class="sxs-lookup"><span data-stu-id="516f6-154">This means that when this migration is applied to future databases, the schema that already existed in the local database will be created by migrations.</span></span>

## <a name="things-to-be-aware-of"></a><span data-ttu-id="516f6-155">Aspetti da tenere presenti</span><span class="sxs-lookup"><span data-stu-id="516f6-155">Things to be aware of</span></span>

<span data-ttu-id="516f6-156">Esistono alcuni aspetti da tenere presenti quando si usano le migrazioni da un database esistente.</span><span class="sxs-lookup"><span data-stu-id="516f6-156">There are a few things you need to be aware of when using Migrations against an existing database.</span></span>

### <a name="defaultcalculated-names-may-not-match-existing-schema"></a><span data-ttu-id="516f6-157">I nomi predefiniti/calcolato potrebbero non corrispondere schema esistente</span><span class="sxs-lookup"><span data-stu-id="516f6-157">Default/calculated names may not match existing schema</span></span>

<span data-ttu-id="516f6-158">Quando esegue scaffolding delle migrazioni di una, le migrazioni specifica in modo esplicito i nomi delle colonne e tabelle.</span><span class="sxs-lookup"><span data-stu-id="516f6-158">Migrations explicitly specifies names for columns and tables when it scaffolds a migrations.</span></span> <span data-ttu-id="516f6-159">Tuttavia, esistono altri oggetti di database che le migrazioni calcola un nome predefinito quando si applicano le migrazioni.</span><span class="sxs-lookup"><span data-stu-id="516f6-159">However, there are other database objects that Migrations calculates a default name for when applying the migrations.</span></span> <span data-ttu-id="516f6-160">Sono inclusi gli indici e vincoli di chiave esterna.</span><span class="sxs-lookup"><span data-stu-id="516f6-160">This includes indexes and foreign key constraints.</span></span> <span data-ttu-id="516f6-161">Quando la destinazione è uno schema esistente, questi nomi calcolati potrebbero non corrispondere effettivamente ciò che esiste nel database.</span><span class="sxs-lookup"><span data-stu-id="516f6-161">When targeting an existing schema, these calculated names may not match what actually exists in your database.</span></span>

<span data-ttu-id="516f6-162">Di seguito sono riportati alcuni esempi di quando è necessario essere a conoscenza di questo oggetto:</span><span class="sxs-lookup"><span data-stu-id="516f6-162">Here are some examples of when you need to be aware of this:</span></span>

<span data-ttu-id="516f6-163">**Se è stato usato ' un'opzione: usare lo schema esistente come punto di partenza ' dal passaggio 3:**</span><span class="sxs-lookup"><span data-stu-id="516f6-163">**If you used ‘Option One: Use existing schema as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="516f6-164">Se le modifiche future nel modello richiedono la modifica o eliminazione di uno degli oggetti di database che ha un nome diverso, è necessario modificare la migrazione con scaffolding per specificare il nome corretto.</span><span class="sxs-lookup"><span data-stu-id="516f6-164">If future changes in your model require changing or dropping one of the database objects that is named differently, you will need to modify the scaffolded migration to specify the correct name.</span></span> <span data-ttu-id="516f6-165">Le API di migrazioni hanno un parametro Name facoltativo che consente di eseguire questa operazione.</span><span class="sxs-lookup"><span data-stu-id="516f6-165">The Migrations APIs have an optional Name parameter that allows you to do this.</span></span>
    <span data-ttu-id="516f6-166">Ad esempio, lo schema esistente sia disponibile una tabella di Post con una colonna chiave esterna BlogId dotato di un indice denominato IndexFk\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="516f6-166">For example, your existing schema may have a Post table with a BlogId foreign key column that has an index named IndexFk\_BlogId.</span></span> <span data-ttu-id="516f6-167">Tuttavia, per impostazione predefinita le migrazioni aspetta l'indice sia denominato IX\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="516f6-167">However, by default Migrations would expect this index to be named IX\_BlogId.</span></span> <span data-ttu-id="516f6-168">Se si apporta una modifica al modello che causa l'eliminazione dell'indice, è necessario modificare la chiamata DropIndex sottoposto a scaffolding per specificare il IndexFk\_BlogId nome.</span><span class="sxs-lookup"><span data-stu-id="516f6-168">If you make a change to your model that results in dropping this index, you will need to modify the scaffolded DropIndex call to specify the IndexFk\_BlogId name.</span></span>

<span data-ttu-id="516f6-169">**Se è stato usato ' opzione due: usare il database vuoto come punto di partenza ' dal passaggio 3:**</span><span class="sxs-lookup"><span data-stu-id="516f6-169">**If you used ‘Option Two: Use empty database as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="516f6-170">Tentativo di eseguire il metodo verso il basso della migrazione iniziale (che è, il ripristino a un database vuoto) nel database locale potrebbe non riuscire perché Migrations proverà a eliminare gli indici e vincoli di chiave esterna usando i nomi non corretti.</span><span class="sxs-lookup"><span data-stu-id="516f6-170">Trying to run the Down method of the initial migration (that is, reverting to an empty database) against your local database may fail because Migrations will try to drop indexes and foreign key constraints using the incorrect names.</span></span> <span data-ttu-id="516f6-171">Questo influirà solo il database locale poiché altri database verranno creati da zero usando il metodo di accesso della migrazione iniziale.</span><span class="sxs-lookup"><span data-stu-id="516f6-171">This will only affect your local database since other databases will be created from scratch using the Up method of the initial migration.</span></span>
    <span data-ttu-id="516f6-172">Se si vuole effettuare il downgrade del database esistente locale a uno stato vuoto è più semplice eseguire questa operazione manualmente, mediante l'eliminazione del database o l'eliminazione di tutte le tabelle.</span><span class="sxs-lookup"><span data-stu-id="516f6-172">If you want to downgrade your existing local database to an empty state it is easiest to do this manually, either by dropping the database or dropping all the tables.</span></span> <span data-ttu-id="516f6-173">Dopo il downgrade iniziale di che tutti gli oggetti di database verranno ricreati con i nomi predefiniti, quindi questo problema non presenterà stesso nuovamente.</span><span class="sxs-lookup"><span data-stu-id="516f6-173">After this initial downgrade all database objects will be recreated with the default names, so this issue will not present itself again.</span></span>
-   <span data-ttu-id="516f6-174">Se le modifiche future nel modello richiedono la modifica o eliminazione di uno degli oggetti di database che ha un nome diverso, questo non funzionerà con il database locale esistente, poiché i nomi non corrispondano ai valori predefiniti.</span><span class="sxs-lookup"><span data-stu-id="516f6-174">If future changes in your model require changing or dropping one of the database objects that is named differently, this will not work against your existing local database – since the names won’t match the defaults.</span></span> <span data-ttu-id="516f6-175">Tuttavia, funzionerà con i database creati 'da zero' poiché sono verranno usati i nomi predefiniti scelti per le migrazioni.</span><span class="sxs-lookup"><span data-stu-id="516f6-175">However, it will work against databases that were created ‘from scratch’ since they will have used the default names chosen by Migrations.</span></span>
    <span data-ttu-id="516f6-176">È possibile apportare manualmente queste modifiche sul database esistente locale oppure è consigliabile che le migrazioni di ricreare il database da zero: quando si verifica in altri computer.</span><span class="sxs-lookup"><span data-stu-id="516f6-176">You could either make these changes manually on your local existing database, or consider having Migrations recreate your database from scratch – as it will on other machines.</span></span>
-   <span data-ttu-id="516f6-177">I database creati mediante il metodo di accesso del processo di migrazione iniziale possono differire leggermente dal database locale poiché i nomi predefiniti calcolati per gli indici e vincoli di chiave esterna verranno utilizzati.</span><span class="sxs-lookup"><span data-stu-id="516f6-177">Databases created using the Up method of your initial migration may differ slightly from the local database since the calculated default names for indexes and foreign key constraints will be used.</span></span> <span data-ttu-id="516f6-178">Potrebbero anche avere indici aggiuntivi come migrazioni creerà gli indici su colonne chiave esterna per impostazione predefinita, questo potrebbe non essere stata nel caso di database locale originale.</span><span class="sxs-lookup"><span data-stu-id="516f6-178">You may also end up with extra indexes as Migrations will create indexes on foreign key columns by default – this may not have been the case in your original local database.</span></span>

### <a name="not-all-database-objects-are-represented-in-the-model"></a><span data-ttu-id="516f6-179">Non tutti gli oggetti di database sono rappresentati nel modello</span><span class="sxs-lookup"><span data-stu-id="516f6-179">Not all database objects are represented in the model</span></span>

<span data-ttu-id="516f6-180">Gli oggetti di database che non fanno parte del modello non verranno gestiti mediante le migrazioni.</span><span class="sxs-lookup"><span data-stu-id="516f6-180">Database objects that are not part of your model will not be handled by Migrations.</span></span> <span data-ttu-id="516f6-181">Può trattarsi di viste, stored procedure, le autorizzazioni, le tabelle che non fanno parte del modello, gli indici aggiuntivi, e così via.</span><span class="sxs-lookup"><span data-stu-id="516f6-181">This can include views, stored procedures, permissions, tables that are not part of your model, additional indexes, etc.</span></span>

<span data-ttu-id="516f6-182">Di seguito sono riportati alcuni esempi di quando è necessario essere a conoscenza di questo oggetto:</span><span class="sxs-lookup"><span data-stu-id="516f6-182">Here are some examples of when you need to be aware of this:</span></span>

-   <span data-ttu-id="516f6-183">Indipendentemente dall'opzione scelto nel "Passaggio 3", se le modifiche future nel modello richiedono la modifica o eliminazione di questi oggetti aggiuntivi che non riconoscerà le migrazioni per apportare queste modifiche.</span><span class="sxs-lookup"><span data-stu-id="516f6-183">Regardless of the option you chose in ‘Step 3’, if future changes in your model require changing or dropping these additional objects Migrations will not know to make these changes.</span></span> <span data-ttu-id="516f6-184">Ad esempio, se si elimina una colonna che dispone di un indice aggiuntivo su di esso, le migrazioni non sa di eliminare l'indice.</span><span class="sxs-lookup"><span data-stu-id="516f6-184">For example, if you drop a column that has an additional index on it, Migrations will not know to drop the index.</span></span> <span data-ttu-id="516f6-185">È necessario aggiungere manualmente questo schema per la migrazione con scaffolding.</span><span class="sxs-lookup"><span data-stu-id="516f6-185">You will need to manually add this to the scaffolded Migration.</span></span>
-   <span data-ttu-id="516f6-186">Se è stato usato ' opzione due: usare il database vuoto come punto di partenza ', questi oggetti aggiuntivi non verrà creati dal metodo di accesso del processo di migrazione iniziale.</span><span class="sxs-lookup"><span data-stu-id="516f6-186">If you used ‘Option Two: Use empty database as a starting point’, these additional objects will not be created by the Up method of your initial migration.</span></span>
    <span data-ttu-id="516f6-187">È possibile modificare l'alto e verso il basso i metodi che si occupi di questi oggetti aggiuntivi se si desidera.</span><span class="sxs-lookup"><span data-stu-id="516f6-187">You can modify the Up and Down methods to take care of these additional objects if you wish.</span></span> <span data-ttu-id="516f6-188">Per gli oggetti che non sono supportati in modo nativo nell'API di migrazioni – ad esempio viste, è possibile usare la [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) metodo per l'esecuzione SQL non elaborate per creare/eliminare li.</span><span class="sxs-lookup"><span data-stu-id="516f6-188">For objects that are not natively supported in the Migrations API – such as views – you can use the [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) method to run raw SQL to create/drop them.</span></span>
