---
title: Valori generati - Core a Entity Framework
author: rowanmiller
ms.author: divega
ms.date: 10/27/2016
ms.assetid: eb082011-11a1-41b4-a108-15daafa03e80
ms.technology: entity-framework-core
uid: core/modeling/generated-properties
ms.openlocfilehash: 88ccc2da3c2b6cbba8920d7113c82e769b459897
ms.sourcegitcommit: 507a40ed050fee957bcf8cf05f6e0ec8a3b1a363
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/26/2018
ms.locfileid: "31812638"
---
# <a name="generated-values"></a><span data-ttu-id="86279-102">Valori generati</span><span class="sxs-lookup"><span data-stu-id="86279-102">Generated Values</span></span>

## <a name="value-generation-patterns"></a><span data-ttu-id="86279-103">Valore di generazione dei modelli</span><span class="sxs-lookup"><span data-stu-id="86279-103">Value Generation Patterns</span></span>

<span data-ttu-id="86279-104">Esistono tre modelli di generazione di valore che possono essere usati per le proprietà.</span><span class="sxs-lookup"><span data-stu-id="86279-104">There are three value generation patterns that can be used for properties.</span></span>

### <a name="no-value-generation"></a><span data-ttu-id="86279-105">Nessuna generazione di valore</span><span class="sxs-lookup"><span data-stu-id="86279-105">No value generation</span></span>

<span data-ttu-id="86279-106">La generazione di valori non significa che si fornirà sempre un valore valido per essere salvato nel database.</span><span class="sxs-lookup"><span data-stu-id="86279-106">No value generation means that you will always supply a valid value to be saved to the database.</span></span> <span data-ttu-id="86279-107">Questo valore valido deve essere assegnato alle nuove entità prima di essere aggiunti al contesto.</span><span class="sxs-lookup"><span data-stu-id="86279-107">This valid value must be assigned to new entities before they are added to the context.</span></span>

### <a name="value-generated-on-add"></a><span data-ttu-id="86279-108">Aggiungere valore generato in</span><span class="sxs-lookup"><span data-stu-id="86279-108">Value generated on add</span></span>

<span data-ttu-id="86279-109">Valore generato in add significa che viene generato un valore per le nuove entità.</span><span class="sxs-lookup"><span data-stu-id="86279-109">Value generated on add means that a value is generated for new entities.</span></span>

<span data-ttu-id="86279-110">A seconda del provider di database in uso, i valori possono essere generate sul lato client da Entity Framework o nel database.</span><span class="sxs-lookup"><span data-stu-id="86279-110">Depending on the database provider being used, values may be generated client side by EF or in the database.</span></span> <span data-ttu-id="86279-111">Se il valore viene generato dal database, Entity Framework può assegnare un valore temporaneo quando si aggiunge l'entità al contesto.</span><span class="sxs-lookup"><span data-stu-id="86279-111">If the value is generated by the database, then EF may assign a temporary value when you add the entity to the context.</span></span> <span data-ttu-id="86279-112">Verrà sostituito dal valore generato dal database durante questo tipo di valore `SaveChanges()`.</span><span class="sxs-lookup"><span data-stu-id="86279-112">This temporary value will then be replaced by the database generated value during `SaveChanges()`.</span></span>

<span data-ttu-id="86279-113">Se si aggiunge un'entità al contesto con un valore assegnato alla proprietà, Entity Framework tenterà di inserire tale valore anziché generarne uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="86279-113">If you add an entity to the context that has a value assigned to the property, then EF will attempt to insert that value rather than generating a new one.</span></span> <span data-ttu-id="86279-114">Una proprietà viene considerata come un valore assegnato se non viene assegnato il valore predefinito CLR (`null` per `string`, `0` per `int`, `Guid.Empty` per `Guid`, ecc.).</span><span class="sxs-lookup"><span data-stu-id="86279-114">A property is considered to have a value assigned if it is not assigned the CLR default value (`null` for `string`, `0` for `int`, `Guid.Empty` for `Guid`, etc.).</span></span> <span data-ttu-id="86279-115">Per ulteriori informazioni, vedere [valori espliciti per le proprietà generate](../saving/explicit-values-generated-properties.md).</span><span class="sxs-lookup"><span data-stu-id="86279-115">For more information, see [Explicit values for generated properties](../saving/explicit-values-generated-properties.md).</span></span>

> [!WARNING]  
> <span data-ttu-id="86279-116">Come il valore viene generato per le entità aggiunte dipenderà dal provider di database in uso.</span><span class="sxs-lookup"><span data-stu-id="86279-116">How the value is generated for added entities will depend on the database provider being used.</span></span> <span data-ttu-id="86279-117">Provider di database possono configurare automaticamente la generazione di valori per alcuni tipi di proprietà, ma altri potrebbe essere necessario configurare manualmente la modalità con cui il valore viene generato.</span><span class="sxs-lookup"><span data-stu-id="86279-117">Database providers may automatically setup value generation for some property types, but others may require you to manually setup how the value is generated.</span></span>
>
> <span data-ttu-id="86279-118">Ad esempio, quando si utilizza SQL Server, sarà possibile generare automaticamente valori per `GUID` proprietà (mediante l'algoritmo GUID sequenza di SQL Server).</span><span class="sxs-lookup"><span data-stu-id="86279-118">For example, when using SQL Server, values will be automatically generated for `GUID` properties (using the SQL Server sequential GUID algorithm).</span></span> <span data-ttu-id="86279-119">Tuttavia, se si specifica che un `DateTime` proprietà viene generata all'aggiunta, quindi è necessario impostare un modo per i valori da generare.</span><span class="sxs-lookup"><span data-stu-id="86279-119">However, if you specify that a `DateTime` property is generated on add, then you must setup a way for the values to be generated.</span></span> <span data-ttu-id="86279-120">Per a tale scopo, è possibile configurare un valore predefinito di `GETDATE()`, vedere [i valori predefiniti](relational/default-values.md).</span><span class="sxs-lookup"><span data-stu-id="86279-120">One way to do this, is to configure a default value of `GETDATE()`, see [Default Values](relational/default-values.md).</span></span>

### <a name="value-generated-on-add-or-update"></a><span data-ttu-id="86279-121">Valore generato in aggiunta o l'aggiornamento</span><span class="sxs-lookup"><span data-stu-id="86279-121">Value generated on add or update</span></span>

<span data-ttu-id="86279-122">Valore generato all'aggiunta o aggiornamento indica che un nuovo valore viene generato ogni volta che il record viene salvato (insert o update).</span><span class="sxs-lookup"><span data-stu-id="86279-122">Value generated on add or update means that a new value is generated every time the record is saved (insert or update).</span></span>

<span data-ttu-id="86279-123">Ad esempio `value generated on add`, se si specifica un valore per la proprietà in un'istanza di un'entità, che verrà inserito anziché un valore in corso la generazione valore appena aggiunta.</span><span class="sxs-lookup"><span data-stu-id="86279-123">Like `value generated on add`, if you specify a value for the property on a newly added instance of an entity, that value will be inserted rather than a value being generated.</span></span> <span data-ttu-id="86279-124">È inoltre possibile impostare un valore esplicito durante l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="86279-124">It is also possible to set an explicit value when updating.</span></span> <span data-ttu-id="86279-125">Per ulteriori informazioni, vedere [valori espliciti per le proprietà generate](../saving/explicit-values-generated-properties.md).</span><span class="sxs-lookup"><span data-stu-id="86279-125">For more information, see [Explicit values for generated properties](../saving/explicit-values-generated-properties.md).</span></span>

> [!WARNING]
> <span data-ttu-id="86279-126">Come il valore viene generato per le entità aggiunte e aggiornate dipenderà dal provider di database in uso.</span><span class="sxs-lookup"><span data-stu-id="86279-126">How the value is generated for added and updated entities will depend on the database provider being used.</span></span> <span data-ttu-id="86279-127">Provider di database possono automaticamente del programma di installazione la generazione di valori per alcuni tipi di proprietà, mentre altri sarà necessario configurare manualmente la modalità con cui il valore viene generato.</span><span class="sxs-lookup"><span data-stu-id="86279-127">Database providers may automatically setup value generation for some property types, while others will require you to manually setup how the value is generated.</span></span>
> 
> <span data-ttu-id="86279-128">Ad esempio, quando si utilizza SQL Server, `byte[]` le proprietà impostate come generato nell'aggiungere o aggiornare e contrassegnati come token di concorrenza, verrà configurato con il `rowversion` il tipo di dati, in modo che i valori verranno generati nel database.</span><span class="sxs-lookup"><span data-stu-id="86279-128">For example, when using SQL Server, `byte[]` properties that are set as generated on add or update and marked as concurrency tokens, will be setup with the `rowversion` data type - so that values will be generated in the database.</span></span> <span data-ttu-id="86279-129">Tuttavia, se si specifica che un `DateTime` proprietà viene generata in aggiunta o l'aggiornamento, quindi è necessario impostare un modo per i valori da generare.</span><span class="sxs-lookup"><span data-stu-id="86279-129">However, if you specify that a `DateTime` property is generated on add or update, then you must setup a way for the values to be generated.</span></span> <span data-ttu-id="86279-130">Per a tale scopo, è possibile configurare un valore predefinito di `GETDATE()` (vedere [i valori predefiniti](relational/default-values.md)) per generare i valori per le nuove righe.</span><span class="sxs-lookup"><span data-stu-id="86279-130">One way to do this, is to configure a default value of `GETDATE()` (see [Default Values](relational/default-values.md)) to generate values for new rows.</span></span> <span data-ttu-id="86279-131">È quindi possibile utilizzare un trigger di database per generare i valori durante gli aggiornamenti (ad esempio, il trigger di esempio seguente).</span><span class="sxs-lookup"><span data-stu-id="86279-131">You could then use a database trigger to generate values during updates (such as the following example trigger).</span></span>
> 
> [!code-sql[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedOnAddOrUpdate.sql)]

## <a name="conventions"></a><span data-ttu-id="86279-132">Convenzioni</span><span class="sxs-lookup"><span data-stu-id="86279-132">Conventions</span></span>

<span data-ttu-id="86279-133">Per convenzione, le chiavi primarie non composito di tipo short, int, long o Guid verrà configurato, aggiungere i valori vengono generati su.</span><span class="sxs-lookup"><span data-stu-id="86279-133">By convention, non-composite primary keys of type short, int, long, or Guid will be setup to have values generated on add.</span></span> <span data-ttu-id="86279-134">Tutte le altre proprietà verrà configurato con la generazione di alcun valore.</span><span class="sxs-lookup"><span data-stu-id="86279-134">All other properties will be setup with no value generation.</span></span>

## <a name="data-annotations"></a><span data-ttu-id="86279-135">Annotazioni dei dati</span><span class="sxs-lookup"><span data-stu-id="86279-135">Data Annotations</span></span>

### <a name="no-value-generation-data-annotations"></a><span data-ttu-id="86279-136">Nessuna generazione di valore (le annotazioni dei dati)</span><span class="sxs-lookup"><span data-stu-id="86279-136">No value generation (Data Annotations)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Samples/ValueGeneratedNever.cs#Sample)]

### <a name="value-generated-on-add-data-annotations"></a><span data-ttu-id="86279-137">Valore generato in aggiungere (le annotazioni dei dati)</span><span class="sxs-lookup"><span data-stu-id="86279-137">Value generated on add (Data Annotations)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Samples/ValueGeneratedOnAdd.cs#Sample)]

> [!WARNING]  
> <span data-ttu-id="86279-138">In questo modo solo di EF che vengono generati valori per le entità aggiunte, non garantisce che EF installerà il meccanismo effettivo per generare valori.</span><span class="sxs-lookup"><span data-stu-id="86279-138">This just lets EF know that values are generated for added entities, it does not guarantee that EF will setup the actual mechanism to generate values.</span></span> <span data-ttu-id="86279-139">Vedere [aggiungere valore generato in](#value-generated-on-add) sezione per ulteriori dettagli.</span><span class="sxs-lookup"><span data-stu-id="86279-139">See [Value generated on add](#value-generated-on-add) section for more details.</span></span>

### <a name="value-generated-on-add-or-update-data-annotations"></a><span data-ttu-id="86279-140">Valore generato in aggiunta o aggiornamento (le annotazioni dei dati)</span><span class="sxs-lookup"><span data-stu-id="86279-140">Value generated on add or update (Data Annotations)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Samples/ValueGeneratedOnAddOrUpdate.cs#Sample)]

> [!WARNING]  
> <span data-ttu-id="86279-141">Ciò consente solo di EF che vengono generati valori per le entità aggiunte o aggiornate, non garantisce che EF installerà il meccanismo effettivo per generare valori.</span><span class="sxs-lookup"><span data-stu-id="86279-141">This just lets EF know that values are generated for added or updated entities, it does not guarantee that EF will setup the actual mechanism to generate values.</span></span> <span data-ttu-id="86279-142">Vedere [valore generato in aggiunta o aggiornamento](#value-generated-on-add-or-update) sezione per ulteriori dettagli.</span><span class="sxs-lookup"><span data-stu-id="86279-142">See [Value generated on add or update](#value-generated-on-add-or-update) section for more details.</span></span>

## <a name="fluent-api"></a><span data-ttu-id="86279-143">API Fluent</span><span class="sxs-lookup"><span data-stu-id="86279-143">Fluent API</span></span>

<span data-ttu-id="86279-144">È possibile utilizzare l'API Fluent per cambiare il modello di generazione del valore per una determinata proprietà.</span><span class="sxs-lookup"><span data-stu-id="86279-144">You can use the Fluent API to change the value generation pattern for a given property.</span></span>

### <a name="no-value-generation-fluent-api"></a><span data-ttu-id="86279-145">Nessuna generazione di valore (Fluent API)</span><span class="sxs-lookup"><span data-stu-id="86279-145">No value generation (Fluent API)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedNever.cs#Sample)]

### <a name="value-generated-on-add-fluent-api"></a><span data-ttu-id="86279-146">Valore generato in aggiungere (Fluent API)</span><span class="sxs-lookup"><span data-stu-id="86279-146">Value generated on add (Fluent API)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedOnAdd.cs#Sample)]

> [!WARNING]  
> <span data-ttu-id="86279-147">`ValueGeneratedOnAdd()` consente solo EF che vengono generati valori per le entità aggiunte, non garantisce che EF installerà il meccanismo effettivo per generare valori.</span><span class="sxs-lookup"><span data-stu-id="86279-147">`ValueGeneratedOnAdd()` just lets EF know that values are generated for added entities, it does not guarantee that EF will setup the actual mechanism to generate values.</span></span>  <span data-ttu-id="86279-148">Vedere [aggiungere valore generato in](#value-generated-on-add) sezione per ulteriori dettagli.</span><span class="sxs-lookup"><span data-stu-id="86279-148">See [Value generated on add](#value-generated-on-add) section for more details.</span></span>

### <a name="value-generated-on-add-or-update-fluent-api"></a><span data-ttu-id="86279-149">Valore generato in aggiunta o aggiornamento (Fluent API)</span><span class="sxs-lookup"><span data-stu-id="86279-149">Value generated on add or update (Fluent API)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedOnAddOrUpdate.cs#Sample)]

> [!WARNING]  
> <span data-ttu-id="86279-150">Ciò consente solo di EF che vengono generati valori per le entità aggiunte o aggiornate, non garantisce che EF installerà il meccanismo effettivo per generare valori.</span><span class="sxs-lookup"><span data-stu-id="86279-150">This just lets EF know that values are generated for added or updated entities, it does not guarantee that EF will setup the actual mechanism to generate values.</span></span> <span data-ttu-id="86279-151">Vedere [valore generato in aggiunta o aggiornamento](#value-generated-on-add-or-update) sezione per ulteriori dettagli.</span><span class="sxs-lookup"><span data-stu-id="86279-151">See [Value generated on add or update](#value-generated-on-add-or-update) section for more details.</span></span>
