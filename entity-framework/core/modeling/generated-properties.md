---
title: Valori generati - EF Core
author: rowanmiller
ms.date: 10/27/2016
ms.assetid: eb082011-11a1-41b4-a108-15daafa03e80
uid: core/modeling/generated-properties
ms.openlocfilehash: a3656eb1d2dc79ceead04e3a142a58e8afb3cbce
ms.sourcegitcommit: dadee5905ada9ecdbae28363a682950383ce3e10
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/27/2018
ms.locfileid: "42996777"
---
# <a name="generated-values"></a><span data-ttu-id="68d78-102">Valori generati</span><span class="sxs-lookup"><span data-stu-id="68d78-102">Generated Values</span></span>

## <a name="value-generation-patterns"></a><span data-ttu-id="68d78-103">Modelli di generazione di valore</span><span class="sxs-lookup"><span data-stu-id="68d78-103">Value Generation Patterns</span></span>

<span data-ttu-id="68d78-104">Sono disponibili tre modelli di generazione di valore che possono essere utilizzati per le proprietà.</span><span class="sxs-lookup"><span data-stu-id="68d78-104">There are three value generation patterns that can be used for properties.</span></span>

### <a name="no-value-generation"></a><span data-ttu-id="68d78-105">Nessuna generazione di valori</span><span class="sxs-lookup"><span data-stu-id="68d78-105">No value generation</span></span>

<span data-ttu-id="68d78-106">Nessuna generazione di valori significa che verrà sempre fornire un valore valido per essere salvati nel database.</span><span class="sxs-lookup"><span data-stu-id="68d78-106">No value generation means that you will always supply a valid value to be saved to the database.</span></span> <span data-ttu-id="68d78-107">Questo valore valido deve essere assegnato a nuove entità prima di essere aggiunti al contesto.</span><span class="sxs-lookup"><span data-stu-id="68d78-107">This valid value must be assigned to new entities before they are added to the context.</span></span>

### <a name="value-generated-on-add"></a><span data-ttu-id="68d78-108">Aggiungi valore generato in</span><span class="sxs-lookup"><span data-stu-id="68d78-108">Value generated on add</span></span>

<span data-ttu-id="68d78-109">Valore generato in aggiungere significa che viene generato un valore per le nuove entità.</span><span class="sxs-lookup"><span data-stu-id="68d78-109">Value generated on add means that a value is generated for new entities.</span></span>

<span data-ttu-id="68d78-110">A seconda del provider di database in uso, i valori possono essere generati sul lato client da Entity Framework o nel database.</span><span class="sxs-lookup"><span data-stu-id="68d78-110">Depending on the database provider being used, values may be generated client side by EF or in the database.</span></span> <span data-ttu-id="68d78-111">Se il valore viene generato dal database, Entity Framework può assegnare un valore temporaneo quando si aggiunge l'entità al contesto.</span><span class="sxs-lookup"><span data-stu-id="68d78-111">If the value is generated by the database, then EF may assign a temporary value when you add the entity to the context.</span></span> <span data-ttu-id="68d78-112">Questo valore temporaneo verrà sostituito dal valore generato dal database durante `SaveChanges()`.</span><span class="sxs-lookup"><span data-stu-id="68d78-112">This temporary value will then be replaced by the database generated value during `SaveChanges()`.</span></span>

<span data-ttu-id="68d78-113">Se si aggiunge un'entità al contesto con un valore assegnato alla proprietà, quindi Entity Framework tenterà di inserire tale valore anziché generarne uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="68d78-113">If you add an entity to the context that has a value assigned to the property, then EF will attempt to insert that value rather than generating a new one.</span></span> <span data-ttu-id="68d78-114">Una proprietà viene considerata come un valore assegnato se non viene assegnato il valore predefinito CLR (`null` per `string`, `0` per `int`, `Guid.Empty` per `Guid`e così via.).</span><span class="sxs-lookup"><span data-stu-id="68d78-114">A property is considered to have a value assigned if it is not assigned the CLR default value (`null` for `string`, `0` for `int`, `Guid.Empty` for `Guid`, etc.).</span></span> <span data-ttu-id="68d78-115">Per altre informazioni, vedere [valori espliciti per le proprietà generate](../saving/explicit-values-generated-properties.md).</span><span class="sxs-lookup"><span data-stu-id="68d78-115">For more information, see [Explicit values for generated properties](../saving/explicit-values-generated-properties.md).</span></span>

> [!WARNING]  
> <span data-ttu-id="68d78-116">Come il valore viene generato per le entità aggiunte dipenderà dal provider del database in uso.</span><span class="sxs-lookup"><span data-stu-id="68d78-116">How the value is generated for added entities will depend on the database provider being used.</span></span> <span data-ttu-id="68d78-117">I provider di database possono configurare automaticamente la generazione di valori per alcuni tipi di proprietà, ma altri utenti potrebbe essere necessario configurare manualmente il modo in cui il valore viene generato.</span><span class="sxs-lookup"><span data-stu-id="68d78-117">Database providers may automatically setup value generation for some property types, but others may require you to manually setup how the value is generated.</span></span>
>
> <span data-ttu-id="68d78-118">Ad esempio, quando si usa SQL Server, i valori verranno automaticamente generati per `GUID` proprietà (tramite l'algoritmo GUID sequenza di SQL Server).</span><span class="sxs-lookup"><span data-stu-id="68d78-118">For example, when using SQL Server, values will be automatically generated for `GUID` properties (using the SQL Server sequential GUID algorithm).</span></span> <span data-ttu-id="68d78-119">Tuttavia, se si specifica che un `DateTime` proprietà viene generata all'aggiunta, quindi è necessario configurare un modo per i valori da generare.</span><span class="sxs-lookup"><span data-stu-id="68d78-119">However, if you specify that a `DateTime` property is generated on add, then you must setup a way for the values to be generated.</span></span> <span data-ttu-id="68d78-120">Un modo per eseguire questa operazione, consiste nel configurare un valore predefinito pari `GETDATE()`, vedere [valori predefiniti](relational/default-values.md).</span><span class="sxs-lookup"><span data-stu-id="68d78-120">One way to do this, is to configure a default value of `GETDATE()`, see [Default Values](relational/default-values.md).</span></span>

### <a name="value-generated-on-add-or-update"></a><span data-ttu-id="68d78-121">Valore generato in aggiunta o l'aggiornamento</span><span class="sxs-lookup"><span data-stu-id="68d78-121">Value generated on add or update</span></span>

<span data-ttu-id="68d78-122">Valore generato all'aggiunta o aggiornamento indica che un nuovo valore viene generato ogni volta che viene salvato il record (insert o update).</span><span class="sxs-lookup"><span data-stu-id="68d78-122">Value generated on add or update means that a new value is generated every time the record is saved (insert or update).</span></span>

<span data-ttu-id="68d78-123">Ad esempio `value generated on add`, se si specifica un valore per la proprietà in un'istanza di un'entità, che verrà inserito anziché un valore generato valore appena aggiunta.</span><span class="sxs-lookup"><span data-stu-id="68d78-123">Like `value generated on add`, if you specify a value for the property on a newly added instance of an entity, that value will be inserted rather than a value being generated.</span></span> <span data-ttu-id="68d78-124">È anche possibile impostare un valore esplicito durante l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="68d78-124">It is also possible to set an explicit value when updating.</span></span> <span data-ttu-id="68d78-125">Per altre informazioni, vedere [valori espliciti per le proprietà generate](../saving/explicit-values-generated-properties.md).</span><span class="sxs-lookup"><span data-stu-id="68d78-125">For more information, see [Explicit values for generated properties](../saving/explicit-values-generated-properties.md).</span></span>

> [!WARNING]
> <span data-ttu-id="68d78-126">Come il valore viene generato per le entità aggiunte e aggiornate dipenderà dal provider del database in uso.</span><span class="sxs-lookup"><span data-stu-id="68d78-126">How the value is generated for added and updated entities will depend on the database provider being used.</span></span> <span data-ttu-id="68d78-127">I provider di database possono configurare automaticamente la generazione di valori per alcuni tipi di proprietà, mentre altri sarà necessario configurare manualmente il modo in cui il valore viene generato.</span><span class="sxs-lookup"><span data-stu-id="68d78-127">Database providers may automatically setup value generation for some property types, while others will require you to manually setup how the value is generated.</span></span>
> 
> <span data-ttu-id="68d78-128">Ad esempio, quando si usa SQL Server, `byte[]` le proprietà impostate, generata in aggiungere o aggiornare e contrassegnati come token di concorrenza, verrà configurato con il `rowversion` il tipo di dati, in modo che i valori verranno generati nel database.</span><span class="sxs-lookup"><span data-stu-id="68d78-128">For example, when using SQL Server, `byte[]` properties that are set as generated on add or update and marked as concurrency tokens, will be setup with the `rowversion` data type - so that values will be generated in the database.</span></span> <span data-ttu-id="68d78-129">Tuttavia, se si specifica che un `DateTime` proprietà viene generata in aggiunta o l'aggiornamento, quindi è necessario configurare un modo per i valori da generare.</span><span class="sxs-lookup"><span data-stu-id="68d78-129">However, if you specify that a `DateTime` property is generated on add or update, then you must setup a way for the values to be generated.</span></span> <span data-ttu-id="68d78-130">Un modo per eseguire questa operazione, consiste nel configurare un valore predefinito pari `GETDATE()` (vedere [valori predefiniti](relational/default-values.md)) per generare valori per le nuove righe.</span><span class="sxs-lookup"><span data-stu-id="68d78-130">One way to do this, is to configure a default value of `GETDATE()` (see [Default Values](relational/default-values.md)) to generate values for new rows.</span></span> <span data-ttu-id="68d78-131">È quindi possibile utilizzare un trigger di database per generare i valori durante gli aggiornamenti (ad esempio, il trigger di esempio seguente).</span><span class="sxs-lookup"><span data-stu-id="68d78-131">You could then use a database trigger to generate values during updates (such as the following example trigger).</span></span>
> 
> [!code-sql[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedOnAddOrUpdate.sql)]

## <a name="conventions"></a><span data-ttu-id="68d78-132">Convenzioni</span><span class="sxs-lookup"><span data-stu-id="68d78-132">Conventions</span></span>

<span data-ttu-id="68d78-133">Per convenzione, non composte chiavi primarie del tipo short, int, long o Guid verrà configurato per avere i valori generati su Aggiungi.</span><span class="sxs-lookup"><span data-stu-id="68d78-133">By convention, non-composite primary keys of type short, int, long, or Guid will be setup to have values generated on add.</span></span> <span data-ttu-id="68d78-134">Tutte le altre proprietà verrà configurato con la generazione di alcun valore.</span><span class="sxs-lookup"><span data-stu-id="68d78-134">All other properties will be setup with no value generation.</span></span>

## <a name="data-annotations"></a><span data-ttu-id="68d78-135">Annotazioni dei dati</span><span class="sxs-lookup"><span data-stu-id="68d78-135">Data Annotations</span></span>

### <a name="no-value-generation-data-annotations"></a><span data-ttu-id="68d78-136">Nessuna generazione di valori (annotazioni dei dati)</span><span class="sxs-lookup"><span data-stu-id="68d78-136">No value generation (Data Annotations)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Samples/ValueGeneratedNever.cs#Sample)]

### <a name="value-generated-on-add-data-annotations"></a><span data-ttu-id="68d78-137">Valore generato in aggiungere (annotazioni dei dati)</span><span class="sxs-lookup"><span data-stu-id="68d78-137">Value generated on add (Data Annotations)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Samples/ValueGeneratedOnAdd.cs#Sample)]

> [!WARNING]  
> <span data-ttu-id="68d78-138">In questo modo solo di Entity Framework sapere che i valori vengono generati per le entità aggiunte, ciò non garantisce che Entity Framework consente di configurare il meccanismo effettivo per generare valori.</span><span class="sxs-lookup"><span data-stu-id="68d78-138">This just lets EF know that values are generated for added entities, it does not guarantee that EF will setup the actual mechanism to generate values.</span></span> <span data-ttu-id="68d78-139">Visualizzare [generati sul valore aggiunto da](#value-generated-on-add) sezione per altri dettagli.</span><span class="sxs-lookup"><span data-stu-id="68d78-139">See [Value generated on add](#value-generated-on-add) section for more details.</span></span>

### <a name="value-generated-on-add-or-update-data-annotations"></a><span data-ttu-id="68d78-140">Valore generato in aggiunta o aggiornamento (annotazioni dei dati)</span><span class="sxs-lookup"><span data-stu-id="68d78-140">Value generated on add or update (Data Annotations)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Samples/ValueGeneratedOnAddOrUpdate.cs#Sample)]

> [!WARNING]  
> <span data-ttu-id="68d78-141">In questo modo solo di Entity Framework sapere che i valori vengono generati per le entità aggiunte o aggiornate, ciò non garantisce che Entity Framework consente di configurare il meccanismo effettivo per generare valori.</span><span class="sxs-lookup"><span data-stu-id="68d78-141">This just lets EF know that values are generated for added or updated entities, it does not guarantee that EF will setup the actual mechanism to generate values.</span></span> <span data-ttu-id="68d78-142">Visualizzare [valore generato in aggiunta o l'aggiornamento](#value-generated-on-add-or-update) sezione per altri dettagli.</span><span class="sxs-lookup"><span data-stu-id="68d78-142">See [Value generated on add or update](#value-generated-on-add-or-update) section for more details.</span></span>

## <a name="fluent-api"></a><span data-ttu-id="68d78-143">API Fluent</span><span class="sxs-lookup"><span data-stu-id="68d78-143">Fluent API</span></span>

<span data-ttu-id="68d78-144">È possibile usare l'API Fluent per modificare il modello di generazione del valore per una determinata proprietà.</span><span class="sxs-lookup"><span data-stu-id="68d78-144">You can use the Fluent API to change the value generation pattern for a given property.</span></span>

### <a name="no-value-generation-fluent-api"></a><span data-ttu-id="68d78-145">Nessuna generazione di valori (API Fluent)</span><span class="sxs-lookup"><span data-stu-id="68d78-145">No value generation (Fluent API)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedNever.cs#Sample)]

### <a name="value-generated-on-add-fluent-api"></a><span data-ttu-id="68d78-146">Valore generato in aggiungere (API Fluent)</span><span class="sxs-lookup"><span data-stu-id="68d78-146">Value generated on add (Fluent API)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedOnAdd.cs#Sample)]

> [!WARNING]  
> <span data-ttu-id="68d78-147">`ValueGeneratedOnAdd()` semplicemente consente a Entity Framework sapere che i valori vengono generati per le entità aggiunte, ciò non garantisce che Entity Framework consente di configurare il meccanismo effettivo per generare valori.</span><span class="sxs-lookup"><span data-stu-id="68d78-147">`ValueGeneratedOnAdd()` just lets EF know that values are generated for added entities, it does not guarantee that EF will setup the actual mechanism to generate values.</span></span>  <span data-ttu-id="68d78-148">Visualizzare [generati sul valore aggiunto da](#value-generated-on-add) sezione per altri dettagli.</span><span class="sxs-lookup"><span data-stu-id="68d78-148">See [Value generated on add](#value-generated-on-add) section for more details.</span></span>

### <a name="value-generated-on-add-or-update-fluent-api"></a><span data-ttu-id="68d78-149">Valore generato in aggiunta o aggiornamento (API Fluent)</span><span class="sxs-lookup"><span data-stu-id="68d78-149">Value generated on add or update (Fluent API)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedOnAddOrUpdate.cs#Sample)]

> [!WARNING]  
> <span data-ttu-id="68d78-150">In questo modo solo di Entity Framework sapere che i valori vengono generati per le entità aggiunte o aggiornate, ciò non garantisce che Entity Framework consente di configurare il meccanismo effettivo per generare valori.</span><span class="sxs-lookup"><span data-stu-id="68d78-150">This just lets EF know that values are generated for added or updated entities, it does not guarantee that EF will setup the actual mechanism to generate values.</span></span> <span data-ttu-id="68d78-151">Visualizzare [valore generato in aggiunta o l'aggiornamento](#value-generated-on-add-or-update) sezione per altri dettagli.</span><span class="sxs-lookup"><span data-stu-id="68d78-151">See [Value generated on add or update](#value-generated-on-add-or-update) section for more details.</span></span>
